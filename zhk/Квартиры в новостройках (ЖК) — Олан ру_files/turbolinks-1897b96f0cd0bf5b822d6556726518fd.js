(function(){var o,t,n,e,r,u,i,c,a,l,d,f,s,h,p,m,g,v,w,y,b,x,T,E,k,A,R,S,H,L,C,M,N,X,D,q,O,j,P,K,$,G,Q,U,Y,F,z,B,I,J,_,V,W,Z,tt,et,nt,rt,ot,ut,it=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},ct=[].slice;O={},et=!(l=10),A=["html"],ut=s=U=N=m=null,b=function(t){var e;if(!p(t))return I(),a(),Y(t),et&&(e=nt(t))?(x(e),T(t)):T(t,Z);document.location.href=t},nt=function(t){var e;if((e=O[t])&&!e.transitionCacheDisabled)return e},g=function(t){return null==t&&(t=!0),et=t},T=function(n,r){return null==r&&(r=function(){}),rt("page:fetch",{url:n}),null!=ut&&ut.abort(),(ut=new XMLHttpRequest).open("GET",_(n),!0),ut.setRequestHeader("Accept","text/html, application/xhtml+xml, application/xml"),ut.setRequestHeader("X-XHR-Referer",U),ut.onload=function(){var t,e;return rt("page:receive"),(t=$(ut))?(d.apply(null,y(t)),F(),r(),rt("page:load")):(e=ut.getResponseHeader("X-XHR-Redirected-To"),document.location.href=e||n)},ut.onloadend=function(){return ut=null},ut.onerror=function(){return document.location.href=n},ut.send()},x=function(t){return null!=ut&&ut.abort(),d(t.title,t.body),G(t),rt("page:restore")},a=function(){return O[m.url]={url:document.location.href,body:document.body,title:document.title,positionY:window.pageYOffset,positionX:window.pageXOffset,cachedAt:(new Date).getTime(),transitionCacheDisabled:null!=document.querySelector("[data-no-transition-cache]")},f(l)},P=function(t){if(null==t&&(t=l),/^[\d]+$/.test(t))return l=parseInt(t)},f=function(t){var e,n,r,o,u,i;for(e=(u=Object.keys(O)).map(function(t){return O[t].cachedAt}).sort(function(t,e){return e-t}),i=[],n=0,o=u.length;n<o;n++)r=u[n],O[r].cachedAt<=e[t]&&(rt("page:expire",O[r]),i.push(delete O[r]));return i},d=function(t,e,n,r){return document.title=t,document.documentElement.replaceChild(e,document.body),null!=n&&o.update(n),r&&v(),m=window.history.state,rt("page:change"),rt("page:update")},v=function(){var t,e,n,r,o,u,i,c,a,l,d,f;for(n=0,o=(f=Array.prototype.slice.call(document.body.querySelectorAll('script:not([data-turbolinks-eval="false"])'))).length;n<o;n++)if(""===(a=(d=f[n]).type)||"text/javascript"===a){for(e=document.createElement("script"),r=0,u=(l=d.attributes).length;r<u;r++)t=l[r],e.setAttribute(t.name,t.value);e.appendChild(document.createTextNode(d.innerHTML)),c=d.parentNode,i=d.nextSibling,c.removeChild(d),c.insertBefore(e,i)}},V=function(t){return t.innerHTML=t.innerHTML.replace(/<noscript[\S\s]*?<\/noscript>/gi,""),t},Y=function(t){if(t!==U)return p(t)?document.location.href=t:window.history.pushState({turbolinks:!0,url:t},"",t)},F=function(){var t,e;if(t=ut.getResponseHeader("X-XHR-Redirected-To"))return e=J(t)===t?document.location.hash:"",window.history.replaceState(m,"",t+e)},I=function(){return U=document.location.href},B=function(){return window.history.replaceState({turbolinks:!0,url:document.location.href},"",document.location.href)},z=function(){return m=window.history.state},G=function(t){return window.scrollTo(t.positionX,t.positionY)},Z=function(){return document.location.hash?document.location.href=document.location.href:window.scrollTo(0,0)},_=function(t){return J(t)},J=function(t){var e;return null==(e=t).href&&((e=document.createElement("A")).href=t),e.href.replace(e.hash,"")},K=function(t){var e,n;return n=(null!=(e=document.cookie.match(new RegExp(t+"=(\\w+)")))?e[1].toUpperCase():void 0)||"",document.cookie=t+"=; expires=Thu, 01-Jan-70 00:00:01 GMT; path=/",n},rt=function(t,e){var n;return n=document.createEvent("Events"),e&&(n.data=e),n.initEvent(t,!0,!0),document.dispatchEvent(n)},j=function(){return!rt("page:before-change")},$=function(e){var t,n,r,o,u;if(u=function(){var t;return null!=(t=e.getResponseHeader("Content-Type"))?t.match(/^(?:text\/html|application\/xhtml\+xml|application\/xml)(?:;|$)/):void 0},r=function(t){var e,n,r,o,u;for(u=[],e=0,n=(o=t.head.childNodes).length;e<n;e++)null!=("function"==typeof(r=o[e]).getAttribute?r.getAttribute("data-turbolinks-track"):void 0)&&u.push(r.getAttribute("src")||r.getAttribute("href"));return u},t=function(t){var e;return N||(N=r(document)),(e=r(t)).length!==N.length||o(e,N).length!==N.length},o=function(t,e){var n,r,o,u,i;for(t.length>e.length&&(t=(o=[e,t])[0],e=o[1]),u=[],n=0,r=t.length;n<r;n++)i=t[n],0<=it.call(e,i)&&u.push(i);return u},!function(){var t;return 400<=(t=e.status)&&t<600}()&&u()&&(n=s(e.responseText))&&!t(n))return n},y=function(t){var e;return[null!=(e=t.querySelector("title"))?e.textContent:void 0,V(t.body),o.get(t).token,"runScripts"]},o={get:function(t){var e;return null==t&&(t=document),{node:e=t.querySelector('meta[name="csrf-token"]'),token:null!=e&&"function"==typeof e.getAttribute?e.getAttribute("content"):void 0}},update:function(t){var e;if(null!=(e=this.get()).token&&null!=t&&e.token!==t)return e.node.setAttribute("content",t)}},e=function(){var t,e,n,r,o;e=function(t){return(new DOMParser).parseFromString(t,"text/html")},t=function(t){var e;return(e=document.implementation.createHTMLDocument("")).documentElement.innerHTML=t,e},n=function(t){var e;return(e=document.implementation.createHTMLDocument("")).open("replace"),e.write(t),e.close(),e};try{if(window.DOMParser)return o=e("<html><body><p>test"),e}catch(u){return u,o=t("<html><body><p>test"),t}finally{if(1!==(null!=o&&null!=(r=o.body)?r.childNodes.length:void 0))return n}},H=function(t){if(!t.defaultPrevented)return document.removeEventListener("click",E,!1),document.addEventListener("click",E,!1)},E=function(t){var e;if(!t.defaultPrevented&&"A"===(e=w(t)).nodeName&&!R(t,e))return j()||ot(e.href),t.preventDefault()},w=function(t){var e;for(e=t.target;e.parentNode&&"A"!==e.nodeName;)e=e.parentNode;return e},h=function(t){return location.protocol!==t.protocol||location.host!==t.host},p=function(t){var e;return(e=document.createElement("A")).href=t,h(e)},n=function(t){return(t.hash&&J(t))===J(location)||t.href===location.href+"#"},D=function(t){var e;return(e=J(t)).match(/\.[a-z]+(\?.*)?$/g)&&!e.match(new RegExp("\\.(?:"+A.join("|")+")?(\\?.*)?$","g"))},X=function(t){for(var e;!e&&t!==document;)e=null!=t.getAttribute("data-no-turbolink"),t=t.parentNode;return e},tt=function(t){return 0!==t.target.length},q=function(t){return 1<t.which||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey},R=function(t,e){return h(e)||n(e)||D(e)||X(e)||tt(e)||q(t)},t=function(){var t,e,n,r;for(n=0,r=(e=1<=arguments.length?ct.call(arguments,0):[]).length;n<r;n++)t=e[n],A.push(t);return A},c=function(t){return setTimeout(t,500)},L=function(){return document.addEventListener("DOMContentLoaded",function(){return rt("page:change"),rt("page:update")},!0)},M=function(){if("undefined"!=typeof jQuery)return jQuery(document).on("ajaxSuccess",function(t,e){if(jQuery.trim(e.responseText))return rt("page:update")})},C=function(t){var e,n;if(null!=(n=t.state)?n.turbolinks:void 0)return(e=O[t.state.url])?(a(),x(e)):ot(t.target.location.href)},S=function(){return B(),z(),s=e(),document.addEventListener("click",H,!0),c(function(){return window.addEventListener("popstate",C,!1)})},k=void 0!==window.history.state||navigator.userAgent.match(/Firefox\/2[6|7]/),u=window.history&&window.history.pushState&&window.history.replaceState&&k,r=!0,W="GET"===(Q=K("request_method"))||""===Q,i=u&&r&&W,document.addEventListener&&document.createEvent&&(L(),M()),i?(ot=b,S()):ot=function(t){return document.location.href=t},this.Turbolinks={visit:ot,pagesCached:P,processResponse:$,enableTransitionCache:g,allowLinkExtensions:t,crossOriginUrl:p,rememberReferer:I,cacheCurrentPage:a,reflectNewUrl:Y,resetScrollPosition:Z,rememberCurrentState:z,supported:i}}).call(this);