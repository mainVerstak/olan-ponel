(function(){var h=[].slice,m=[].indexOf||function(n){for(var t=0,e=this.length;t<e;t++)if(t in this&&this[t]===n)return t;return-1};define("extend_utils",["jquery","jquery_ujs","livequery"],function(){var n,i,a,l,s,t,e,o,r,u,c,f,d;for(window.console||(window.console={}),t=["log","info","warn","error","debug","trace","dir","group","groupCollapsed","groupEnd","time","timeEnd","profile","profileEnd","dirxml","assert","count","markTimeline","timeStamp","clear"],s=0;s<t.length;)window.console[t[s]]||(window.console[t[s]]=function(){}),s++;$.fn.hasScrollBar=function(){return this.get(0).scrollHeight>this.height()},$.browser={},$.browser.mozilla=/mozilla/.test(navigator.userAgent.toLowerCase())&&!/webkit/.test(navigator.userAgent.toLowerCase()),$.browser.webkit=/webkit/.test(navigator.userAgent.toLowerCase()),$.browser.opera=/opera/.test(navigator.userAgent.toLowerCase()),$.browser.msie=/msie/.test(navigator.userAgent.toLowerCase()),o=$.fn.replaceWith,$.fn.replaceWith=function(n){if(""!==$.trim(n))return o.apply(this,arguments);this.each(function(){return $(this).remove()})},$.fn.forceFloatOnly=function(){var e;return e=/^(\d+(\.\d{0,2})?)?$/,this.each(function(){var t;return t=$(this).val(),$(this).keydown(function(n){var t;return(110===(t=n.charCode||n.keyCode||0)||8===t||9===t||13===t||46===t||110===t||190===t||35<=t&&t<=40||48<=t&&t<=57||96<=t&&t<=105)&&!n.shiftKey}),$(this).keydown(function(){var n;if(n=$(this).val(),e.test(n))return t=n}),$(this).on("keypress keyup",function(){var n;return n=$(this).val(),!!e.test(n)||($(this).val(t),!1)})})},$.fn.forceNumericOnly=function(){var e;return e=/^(\d+)?$/,this.each(function(){var t;return t=$(this).val(),$(this).keydown(function(n){var t;return(8===(t=n.charCode||n.keyCode||0)||9===t||13===t||46===t||110===t||190===t||35<=t&&t<=40||48<=t&&t<=57||96<=t&&t<=105)&&!n.shiftKey}),$(this).keydown(function(){var n;if(n=$(this).val(),e.test(n))return t=n}),$(this).on("keypress keyup",function(){var n;return n=$(this).val(),!!e.test(n)||($(this).val(t),!1)})})},$.extend($.expr[":"],{icontains:function(n,t,e){return 0<=(n.textContent||n.innerText||"").toLowerCase().indexOf((e[3]||"").toLowerCase())}}),window.myCustomConfirmBox=function(n,t){$('<div class="modal" id="confirmationDialog">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>\n        <h4 class="modal-title">\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435</h4>\n      </div>\n      <div class="modal-body">\n        <p>'+n+'</p>\n      </div>\n      <div class="modal-footer">\n        <a data-dismiss="modal" class="btn">\u041d\u0435\u0442</a>\n        <a data-dismiss="modal" class="btn btn-primary confirm">\u0414\u0430</a>\n      </div>\n    </div>\n  </div>\n</div>').modal(),$("#confirmationDialog .confirm").on("click",function(n){return t(n)})},window.myCustomInformBox=function(n,t,e){var o;null==e&&(e="top"),o="","center"===e&&(o="modal-vertical-centered"),$('<div class="modal '+o+'" id="confirmationDialog">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>\n        <h4 class="modal-title">'+n+'</h4>\n      </div>\n      <div class="modal-body">\n        <p>'+t+'</p>\n      </div>\n      <div class="modal-footer">\n        <a data-dismiss="modal" class="btn btn-primary">\u0425\u043e\u0440\u043e\u0448\u043e</a>\n      </div>\n    </div>\n  </div>\n</div>').modal(),$("#confirmationDialog .confirm").on("click",function(n){return callback(n)})},$(document).on("click","[data-confirm-dialog]",function(n){var t,e;return t=$(this),n.preventDefault(),(e=t.attr("data-confirm-dialog"))?window.myCustomConfirmBox(e,function(){return t.removeAttr("data-confirm-dialog"),t.trigger("click")}):require(["turbolinks"],function(){return Turbolinks.visit(t.attr("href"))})}),$.rails.allowAction=function(t){var e,n;return n=t.data("confirm"),e=!1,void 0,!n||($.rails.fire(t,"confirm")&&window.myCustomConfirmBox(n,function(){var n;$.rails.fire(t,"confirm:complete",[e])&&(n=$.rails.allowAction,$.rails.allowAction=function(){return!0},t.trigger("click"),$.rails.allowAction=n)}),!1)},$.fn.justtext=function(){return $(this).clone().children().remove().end().text()},i=$.fn.addClass,$.fn.addClass=function(n){var t,e,o,r;for(r=i.apply(this,arguments),e=void 0,s=0,o=this.length;s<o;)(e=this[s])instanceof SVGElement&&((t=$(e).attr("class"))?-1===t.indexOf(n)&&(t=t+" "+n,$(e).attr("class",t)):$(e).attr("class",n)),s++;return r},u=$.fn.removeClass,$.fn.removeClass=function(n){var t,e,o,r,i;for(i=u.apply(this,arguments),e=void 0,s=0,r=this.length;s<r;)(e=this[s])instanceof SVGElement&&(t=$(e).attr("class"))&&-1!==(o=t.indexOf(n))&&(t=t.substring(0,o)+t.substring(o+n.length,t.length),$(e).attr("class",t)),s++;return i},$.fn.isMobile=function(){return window.innerWidth<768},d=function(n){var t,e,o,r,i,a;if(t=function(){var n;return("undefined"!=typeof document&&null!==document&&null!=(n=document.body)?n.clientHeight:void 0)||$(window).height()},r=$.fn.isMobile()?10:30,e=n.height()+2*r,a=t(),o=n.data("lastWindowHeight"),(a<e||o&&o<a)&&300<(i=a-2*r))return n.attr("style","height: "+i+"px;").data("lastWindowHeight",a)},$(".modal-content").livequery(function(){var n;return n=$(this),d(n),n.on("resizeModal",function(){return d(n)})}),f=e=null,c=function(){if(!f)return f=setTimeout(function(){return f=null,n()},66)},$(window).resize(c),n=function(){var n;return n=$.fn.isMobile(),e!==n&&(e=n,$(window).trigger("changeMode",[n])),$(".modal-content").each(function(){return $(this).trigger("resizeModal")})},r=function(){return e=$.fn.isMobile()},$(document).ready(r),$(document).on("page:load",r),a=$.fn.hasClass,$.fn.hasClass=function(n){var t,e,o,r;for(r=a.apply(this,arguments),e=void 0,s=0,o=this.length;s<o;){if((e=this[s])instanceof SVGElement)return!!(t=$(e).attr("class"))&&-1!==t.indexOf(n);s++}return r},window.formatRub=function(n){var t,e,o;for(o=n.toString().split(""),e="",t=0,s=o.length-1;0<=s;)3===t?(e=o[s]+" "+e,t=0):e=o[s]+e,t++,s--;return e},$.fn.pluralForm=function(n,t){return t[function(n){return Number(n%10==1&&n%100!=11?0:2<=n%10&&n%10<=4&&(n%100<10||20<=n%100)?1:2)}(n)]},$.fn.isSearchMapMode=function(){return 0<$(".map_container").length},$.fn.formatMoney=function(n,t,e,o,r){var i;null==t&&(t=2),null==e&&(e=","),null==o&&(o=" "),null==r&&(r="\u0420");try{return t=Math.abs(t),t=isNaN(t)?2:t,(n<0?"-":"")+((i=3<(s=parseInt(n=Math.abs(Number(n)||0).toFixed(t)).toString()).length?s.length%3:0)?s.substr(0,i)+o:"")+s.substr(i).replace(/(\d{3})(?=\d)/g,"$1"+o)+(t?e+Math.abs(n-s).toFixed(t).slice(2):"")+(r?" "+r:"")}catch(a){return n}},$.fn.debounce=function(o,r,i){var a;return a=null,function(){var n,t,e;return n=1<=arguments.length?h.call(arguments,0):[],e=this,t=function(){return i||o.apply(e,n),a=null},a?clearTimeout(a):i&&o.apply(e,n),a=setTimeout(t,r||100)}},$.fn.difference=function(n,t){return n.filter(function(n){return m.call(t,n)<0})},$.fn.intersection=function(){var n;return 0===(n=1<=arguments.length?h.call(arguments,0):[]).length?[]:1===n.length?n[0]:n.reduce(function(n,t){return n.filter(function(n){return 0<=m.call(t,n)})})},$.fn.truncate=function(n,t){var e,o,r,i;return null==t&&(t={}),e=null!=(r=t.length)?r:30,o=null!=(i=t.omission)?i:"...",$.trim(n.substr(0,e-o.length))+(n.length>e?o:"")},$.fn.compact=function(n){return n.filter(Boolean)},$.fn.arrayFind=function(n,t){var e;return 0===(e=$.grep(n,t)).length?void 0:e[0]},$.fn.serializeArrayToObject=function(n){var e;return e={},$(n).each(function(n,t){return e[t.name]=t.value}),e},$.fn.uniq=function(n){var t,e,o,r,i,a;for(o={},e=t=0,r=n.length;0<=r?t<r:r<t;e=0<=r?++t:--t)o[n[e]]=n[e];for(e in i=[],o)a=o[e],i.push(a);return i},l={}.hasOwnProperty,$.fn.classNames=function(){var n,t,e,o,r;for(e=[],s=0;s<arguments.length;)if(n=arguments[s]){if("string"===(t=typeof n)||"number"===t)e.push(n);else if(Array.isArray(n)&&n.length)(o=$.fn.classNames.apply(null,n))&&e.push(o);else if("object"===t)for(r in n)l.call(n,r)&&n[r]&&e.push(r);s++}else s++;return e.join(" ")},$.fn.groupBy=function(n,o){return n.reduce(function(n,t){var e;return e="function"==typeof o?o(t):t[o],n.hasOwnProperty(e)||(n[e]=[]),n[e].push(t),n},{})},$.fn.chunk=function(n,t){var e,o;for(e=[],o=0;o<n.length;)e.push(n.slice(o,t+o)),o+=t;return e},$.fn.startsWith=function(n,t){return n.slice(0,t.length)===t},$.fn.quoteattr=function(n,t){return t=t?"&#13;":"\n",(""+n).replace(/&/g,"&amp;").replace(/'/g,"&apos;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r\n/g,t).replace(/[\r\n]/g,t)},$.fn.getQueryStringParam=function(n,t){var e;return t||(t=window.location.href),n=n.replace(/[\[\]]/g,"\\$&"),(e=new RegExp("[?&]"+n+"(=([^&#]*)|&|#|$)").exec(t))?e[2]?decodeURIComponent(e[2].replace(/\+/g," ")):"":null},$.fn.tagOptions=function(n){var t,e,o;for(e in null==n&&(n={}),t=[],n)null!=(o=n[e])&&t.push(e+'="'+$.fn.quoteattr(o)+'"');return 0===t.length?"":" "+t.join(" ")},$.fn.contentTag=function(n,t,e,o){return null==e&&(e={}),null==o&&(o=!1),o&&(t=$.fn.escape(t)),"<"+n+$.fn.tagOptions(e)+">"+t+"</"+n+">"},$.fn.contentFuncTag=function(n,t,e){return"<"+n+$.fn.tagOptions(t)+">"+e()+"</"+n+">"},$.fn.tag=function(n,t){return null==t&&(t={}),"<"+n+$.fn.tagOptions(t)+" />"},$.fn.checkboxTag=function(n,t,e,o){return null==o&&(o={}),o.type="checkbox",o.name=n,o.value=t,e&&(o.checked="checked"),$.fn.tag("input",o)},$.fn.textFieldTag=function(n,t,e){return null==e&&(e={}),e.type="text",e.name=n,e.value=t,$.fn.tag("input",e)},$.fn.textAreaTag=function(n,t,e){return null==t&&(t=""),null==e&&(e={}),e.name=n,$.fn.contentTag("textarea",t,e,!0)},$.fn.hiddenFieldTag=function(n,t,e){return null==e&&(e={}),e.type="hidden",e.name=n,e.value=t,$.fn.tag("input",e)},$.fn.selectTag=function(n,t,e){return null==e&&(e={}),e.name=n,e.includeBlank&&(t='<option value=""></option>'+t,delete e.includeBlank),e.prompt&&(t='<option value="">'+e.prompt+"</option>"+t,delete e.prompt),$.fn.contentTag("select",t,e)},$.fn.optionsForSelect=function(n,i){return $.map(n,function(n){var t,e,o,r;return o=n[0],r=n[1],t=n[2],e=!i&&0!==i||i!==r?null:"selected",t=t||{},t=$.extend(t,{value:r,selected:e}),$.fn.contentTag("option",o,t)}).join("\n")},$.fn.generateModal=function(n,t){var e,o;return e={"class":"modal",tabindex:"-1",role:"dialog"},o="modal-dialog",n.size&&(o=$.fn.classNames(o,n.size),delete n.size),$.fn.contentFuncTag("div",$.extend(e,n),function(){return $.fn.contentFuncTag("div",{"class":o,role:"document"},function(){return $.fn.contentFuncTag("div",{"class":"modal-content"},t)})})},$.fn.assignModal=function(n){var t;return t=$(n),$("body").append(t),t},$.fn.confirmDialog=function(n){var t,e,o,r,i,a,l,s,u;return u=n.title,s=n.text,l=n.onConfirm,o=n.data,u=u||"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435",i=function(){return'<button type="button" class="close" data-dismiss="modal" aria-label="Close">\n  <i class="fas fa-times"></i>\n</button>\n<h4 class="modal-title">'+u+"</h4>"},t=function(){return"<p>"+s+"</p>"},r=function(){return'<button type="button" class="btn btn-default btn-lg modal-feed__btn" data-dismiss="modal">\u041d\u0435\u0442</button>\n<button type="button" class="btn btn-primary btn-lg modal-feed__btn">\u0414\u0430</button>'},a="modal modal-custom-new modal-feed _styled",e=$.fn.generateModal({id:"confirmModal","class":a},function(){return[$.fn.contentFuncTag("div",{"class":"modal-header"},i),$.fn.contentFuncTag("div",{"class":"modal-body"},t),$.fn.contentFuncTag("div",{"class":"modal-footer"},r)].join("\n")}),$("#confirmModal").remove(),$.fn.assignModal(e),$("#confirmModal button.btn-primary").click(function(){return $("#confirmModal").modal("hide"),l(o)}),$("#confirmModal").modal("show")},$.fn.escape=function(n){var t;return t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},String(n).replace(/[&<>"'`=\/]/g,function(n){return t[n]})},$.fn.isScrolledIntoView=function(n,t){var e,o,r,i,a,l;return null==t&&(t=0),o=(r=(e=$(window)).scrollTop())+e.height(),a=(l=$(this).offset().top)-n,i=l+$(this).outerHeight()+t,Math.min(i,a)<=o&&Math.max(i,a)>=r},$.fn.inputFilter=function(n){return this.on("input keydown keyup mousedown mouseup select contextmenu drop",function(){n(this.value)?(this.oldValue=this.value,this.oldSelectionStart=this.selectionStart,this.oldSelectionEnd=this.selectionEnd):this.hasOwnProperty("oldValue")?(this.value=this.oldValue,this.setSelectionRange(this.oldSelectionStart,this.oldSelectionEnd)):this.value=""})}})}).call(this);