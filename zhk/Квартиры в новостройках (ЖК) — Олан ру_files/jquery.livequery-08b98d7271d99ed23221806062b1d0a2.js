!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?e(require("jquery")):e(jQuery)}(function(o,n){function s(e,n,t,u){return!(e.selector!=n.selector||e.context!=n.context||t&&t.$lqguid!=n.fn.$lqguid||u&&u.$lqguid!=n.fn2.$lqguid)}o.extend(o.fn,{livequery:function(t,u){var r,i=this;return o.each(c.queries,function(e,n){if(s(i,n,t,u))return(r=n)&&!1}),(r=r||new c(i.selector,i.context,t,u)).stopped=!1,r.run(),i},expire:function(t,u){var r=this;return o.each(c.queries,function(e,n){s(r,n,t,u)&&!r.stopped&&c.stop(n.id)}),r}});var c=o.livequery=function(e,n,t,u){var r=this;return r.selector=e,r.context=n,r.fn=t,r.fn2=u,r.elements=o([]),r.stopped=!1,r.id=c.queries.push(r)-1,t.$lqguid=t.$lqguid||c.guid++,u&&(u.$lqguid=u.$lqguid||c.guid++),r};c.prototype={stop:function(){var e=this;e.stopped||(e.fn2&&e.elements.each(e.fn2),e.elements=o([]),e.stopped=!0)},run:function(){var e=this;if(!e.stopped){var n=e.elements,t=o(e.selector,e.context),u=t.not(n),r=n.not(t);e.elements=t,u.each(e.fn),e.fn2&&r.each(e.fn2)}}},o.extend(c,{guid:0,queries:[],queue:[],running:!1,timeout:null,registered:[],checkQueue:function(){if(c.running&&c.queue.length)for(var e=c.queue.length;e--;)c.queries[c.queue.shift()].run()},pause:function(){c.running=!1},play:function(){c.running=!0,c.run()},registerPlugin:function(){o.each(arguments,function(e,n){if(o.fn[n]&&!(0<o.inArray(n,c.registered))){var t=o.fn[n];o.fn[n]=function(){var e=t.apply(this,arguments);return c.run(),e},c.registered.push(n)}})},run:function(e){e!==n?o.inArray(e,c.queue)<0&&c.queue.push(e):o.each(c.queries,function(e){o.inArray(e,c.queue)<0&&c.queue.push(e)}),c.timeout&&clearTimeout(c.timeout),c.timeout=setTimeout(c.checkQueue,20)},stop:function(e){e!==n?c.queries[e].stop():o.each(c.queries,c.prototype.stop)}}),c.registerPlugin("append","replaceWith","prepend","after","before","wrap","attr","removeAttr","addClass","removeClass","toggleClass","empty","remove","html","prop","removeProp","text","val"),o(document).on("page:load page:update ready click ajaxStop",function(){c.play()})});