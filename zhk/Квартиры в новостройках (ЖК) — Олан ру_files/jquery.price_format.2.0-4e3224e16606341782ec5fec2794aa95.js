!function(w){w.fn.priceFormat=function(P){var t={prefix:"US$ ",suffix:"",centsSeparator:".",thousandsSeparator:",",limit:!1,centsLimit:2,clearPrefix:!1,clearSufix:!1,allowNegative:!1,insertPlusSign:!1,clearOnEmpty:!1};P=w.extend(t,P);return this.each(function(){function c(t){h.is("input")?h.val(t):h.html(t)}function r(){return l=h.is("input")?h.val():h.html()}function u(t){for(var n="",r=0;r<t.length;r++)char_=t.charAt(r),0==n.length&&0==char_&&(char_=!1),char_&&char_.match(p)&&(g?n.length<g&&(n+=char_):n+=char_);return n}function f(t){for(;t.length<b+1;)t="0"+t;return t}function s(t,n){if(!n&&(""===t||t==s("0",!0))&&O)return"";var r=f(u(t)),i="",a=0;0==b&&(e=_="");var e=r.substr(r.length-b,b),c=r.substr(0,r.length-b);if(r=0==b?c:c+_+e,d||""!=w.trim(d)){for(var o=c.length;0<o;o--)char_=c.substr(o-1,1),++a%3==0&&(char_=d+char_),i=char_+i;i.substr(0,1)==d&&(i=i.substring(1,i.length)),r=0==b?i:i+_+e}return!y||0==c&&0==e||(r=-1!=t.indexOf("-")&&t.indexOf("+")<t.indexOf("-")?"-"+r:k?"+"+r:""+r),m&&(r=m+r),v&&(r+=v),r}function t(t){var n=t.keyCode?t.keyCode:t.which,r=String.fromCharCode(n),i=!1,a=l,e=s(a+r);(48<=n&&n<=57||96<=n&&n<=105)&&(i=!0),8==n&&(i=!0),9==n&&(i=!0),13==n&&(i=!0),46==n&&(i=!0),37==n&&(i=!0),39==n&&(i=!0),!y||189!=n&&109!=n&&173!=n||(i=!0),!k||187!=n&&107!=n&&61!=n||(i=!0),i||(t.preventDefault(),t.stopPropagation(),a!=e&&c(e))}function n(){var t=r(),n=s(t);t!=n&&c(n),0==parseFloat(t)&&O&&c("")}function i(){h.val(m+r())}function a(){h.val(r()+v)}function e(){""!=w.trim(m)&&x&&c(r().split(m)[1])}function o(){""!=w.trim(v)&&S&&c(r().split(v)[0])}var h=w(this),l="",p=/[0-9]/;l=h.is("input")?h.val():h.html();var m=P.prefix,v=P.suffix,_=P.centsSeparator,d=P.thousandsSeparator,g=P.limit,b=P.centsLimit,x=P.clearPrefix,S=P.clearSuffix,y=P.allowNegative,k=P.insertPlusSign,O=P.clearOnEmpty;k&&(y=!0),h.bind("keydown.price_format",t),h.bind("keyup.price_format",n),h.bind("focusout.price_format",n),x&&(h.bind("focusout.price_format",function(){e()}),h.bind("focusin.price_format",function(){i()})),S&&(h.bind("focusout.price_format",function(){o()}),h.bind("focusin.price_format",function(){a()})),0<r().length&&(n(),e(),o())})},w.fn.unpriceFormat=function(){return w(this).unbind(".price_format")},w.fn.unmask=function(){var t,n="";for(var r in t=w(this).is("input")?w(this).val():w(this).html())isNaN(t[r])&&"-"!=t[r]||(n+=t[r]);return n}}(jQuery);