(function(){define("main_module",["jquery","module","livequery","extend_utils","turbolinks"],function(r,e){var n,t,o,i,a,u,d,c,s,l,f,v,m,p,_,h,w,y;return y=e.config().site,(window.jQuery=r)("[data-tooltip]").livequery(function(){var e;e=r(this),require(["bootstrap"],function(){e.tooltip({container:"body",title:e.attr("data-tooltip"),placement:"top"})})}),c=function(e){var n,t;return n=r(this),e.preventDefault(),t=n.data("url"),n.data("remote")?r.getScript(t):Turbolinks.visit(t)},i=function(e){var n,t;return n=r(this),e.preventDefault(),t=n.data("url"),r.getScript(t)},u=function(e){var n,t;return n=r(this),e.preventDefault(),t=n.data("url"),Turbolinks.visit(t)},d=function(e){var n,t,o;return n=r(this),e.preventDefault(),o=n.data("url"),(t="undefined"!=typeof window&&null!==window?window.open(o,"_blank"):void 0)?t.focus():Turbolinks.visit(o)},s=function(e){var n,t;return n=r(this),e.preventDefault(),n.addClass("invisible"),t=n.data("url"),window.sendYandexMetrika("show_more"),r(document).trigger("page:fetch"),r.getScript(t)},o=function(e){var n,t,o;return o=r(this),e.preventDefault(),t=r("<form></form>").attr("method","POST").attr("action",o.data("url")),o.data("advertisement_id"),n=r("<input></input>").attr("value",o.data("advertisement_id")).attr("name","advertisement_id").attr("type","hidden"),t.append(n),r("body").append(t),t.submit()},m=function(e){var n,t,o;return e.preventDefault(),n={},t=r(this).serialize(),o=this.action,t.length&&(-1===this.action.indexOf("?")?o+="?":o+="&",o+=t),Turbolinks.visit(o,n)},r(".fake_href_action[data-fake_href_id]").livequery(function(){var t,e,o;(t=r(this)).hasClass("loaded")||(t.addClass("loaded"),(e=r("#fake_href_id"+t.data("fake_href_id"))).hasClass("yaSend")&&(t.addClass("yaSend"),t.attr("yaparam",e.attr("yaparam"))),o=e.attr("href"),t.click(function(e){var n;r(e.target).is("a:not(.fake_href_action)")||(e.preventDefault(),t.data("blank")&&(n="undefined"!=typeof window&&null!==window?window.open(o,"_blank"):void 0)?n.focus():Turbolinks.visit(o))}))}),window.sendYandexMetrika=function(e){var n;"undefined"!=typeof window&&null!==window&&null!=(n=window.yaCounter28695786)&&n.reachGoal(e)},window.hitYaMetrika=function(){var e;"undefined"!=typeof window&&null!==window&&null!=(e=window.yaCounter28695786)&&e.hit(document.URL,document.title,document.referrer)},r(document).on("page:change",function(){window.hitYaMetrika()}),f=function(){return window.sendYandexMetrika(r(this).attr("yaparam"))},v=function(){var t;return t=r(this),require(["cookies"],function(e){var n;if("1"===e.get("yaSend_open_domclick_fake")?"undefined"!=typeof window&&null!==window&&window.sendYandexMetrika("phone_num_open_fake_domclick"):(e.set("yaSend_open_domclick_fake","1",{expires:30,domain:y.cookiesDomain}),"undefined"!=typeof window&&null!==window&&window.sendYandexMetrika("phone_num_open_domclick")),n=t.data("domclick-additional-metrika"))return"undefined"!=typeof window&&null!==window?window.sendYandexMetrika(n):void 0})},t=function(e){return e.stopPropagation()},r(".formatRub").livequery(function(){r(this).hasClass("loaded-format-rub")||(r(this).addClass("loaded-format-rub"),r(this).text(formatRub(r(this).text())))}),r(".ShowAdvPhoneAction").livequery(function(){var n;(n=r(this)).removeClass("invisible"),n.click(function(e){var o;e.preventDefault(),o=n.data("id"),require(["routes","cookies"],function(e,n){var t;return"true"===n.get("show_social_lock")?r.getScript(e.socialLock.show(o)):r.getScript(e.phones.show(o,{url:"undefined"!=typeof window&&null!==window&&null!=(t=window.location)?t.href:void 0}))})})}),r(".advertisementArchivedAction.hidden").livequery(function(){var e;(e=r(this)).html('<i class="fas fa-archive"></i> \u0410\u0440\u0445\u0438\u0432\u043d\u043e\u0435 \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u0435'),e.removeClass("hidden")}),r('input[type="text"][valid-type=number]').livequery(function(){var e;e=r(this),require(["extend_utils"],function(){return e.inputFilter(function(e){return/^\d*$/.test(e)})})}),r('input[type="text"][valid-type=integer]').livequery(function(){var e;e=r(this),require(["extend_utils"],function(){e.forceNumericOnly()})}),r('input[type="text"][valid-type=float]').livequery(function(){var e;e=r(this),require(["extend_utils"],function(){e.forceFloatOnly()})}),r('[name="advertisement[price_from]"], [name="advertisement[price_to]"], [name="abuse[price]"]').livequery(function(){var e;e=r(this),require(["price_format"],function(){e.priceFormat({prefix:"",thousandsSeparator:" ",centsLimit:0,clearPrefix:!0}),e.focusout(function(){"0"===e.val()&&e.val("")})})}),r("textarea:visible:not(.textarea_loaded, .rack-form__textarea)").livequery(function(){var n;return(n=r(this)).addClass("textarea_loaded"),requirejs(["autosize"],function(e){if(0<n.length)return e(n[0])})}),r(".tooltip_comment_action:not(.tooltip_comment_loaded)").livequery(function(){var e,n;(e=r(this)).addClass("tooltip_comment_loaded"),n=null,e.on("mouseenter",function(){n||(n=setTimeout(function(){e.removeClass("object__text-trim"),n=null},1500))}).on("mouseleave",function(){if(n)return clearTimeout(n),n=null})}),r(".auto_refresh_block_action:not(.loaded)").livequery(function(){var n,t,o;return o=0,(n=r(this)).addClass("loaded"),(t=function(){var e;if(0!==n.length&&!(100<o))return e=o<1?15:o<10?60:900,o+=1,setTimeout(function(){var e;if(e=r(".auto_refresh_block_action").data("url"))return r.getScript(e,function(){return t()})},1e3*e)})()}),r("nav.sidenav:not(.loaded)").livequery(function(){var e;(e=r(this)).addClass("loaded"),e.append('<button aria-label="Close" class="sidenav__close" type="button"><i class="fas fa-times"></i></button>'),r('<div class="sidenav-overlay"></div>').insertAfter(e)}),r(".sidenav.sidenav_open:not(.swipeLoaded)").livequery(function(){var e;return(e=r(this)).addClass("swipeLoaded"),requirejs(["touchwipe"],function(){e.swipe({swipeRight:function(){n()}})})}),r(".sidenav-button").livequery(function(){var e;(e=r(this)).removeClass("invisible"),e.click(function(){r(".sidenav").addClass("sidenav_open"),r(".sidenav-overlay").addClass("sidenav-overlay_open"),r("body").addClass("page-block")})}),n=function(){r(".sidenav").removeClass("sidenav_open"),r(".sidenav-overlay").removeClass("sidenav-overlay_open"),r("body").removeClass("page-block")},l=function(){var e;if(!(e=r(this)).is("a")||"#"!==e.attr("href"))return n()},r(window).on("resize",function(){375<=r(window).width()&&n()}),r(".btn-place-an-ad").livequery(function(){var i,e,a;return i=r(this),a=i.offset().top,e=function(){var e,n,t,o;t=0,(e=r(".yandex_first_styler")).length&&(n=e.offset().top+e.outerHeight()+200,a<n&&(t=n-a)),(o=r(window).scrollTop())<t||200+t<o?i.addClass("invisible"):i.removeClass("invisible")},r(window).on("resize scroll",e),e()}),r(".ShowAdvNotepadAction").livequery(function(){var t;(t=r(this)).removeClass("invisible"),t.click(function(e){var n;e.preventDefault(),n=t.data("id"),require(["routes"],function(e){return r.getScript(e.notepads.show(n))})})}),r(".js-reservation-contact-action").livequery(function(){var n;return(n=r(this)).removeClass("invisible"),n.click(function(e){return e.preventDefault(),require(["routes"],function(e){return r.getScript(e.reservation_contacts["new"]({advertisement_id:n.data("id")}))})})}),r(".js-card-complex-phone:not(.loaded)").livequery(function(){var n;return(n=r(this)).addClass("loaded").removeClass("invisible"),n.click(function(e){return r.getScript(n.data("url")),e.preventDefault()})}),(h=document.createElement("a")).href=window.location.href,h.hostname&&(_=(p=h.hostname.toLowerCase()).split(".").slice(-2).join("."),"localhost"!==p&&_!==y.domain&&_!==normalizeDomain(y.mainDomain))?window.location.href=y.domainWithProtocol:(a=function(){var e;return r(document).off("click","#open-review-box",a),e=r(this),require(["linked_data_comments_module"],function(){return e.click()})},r(document).on("click","#open-review-box",a),r(document).on("click","a.per_page_action",c),r(document).on("click","a.open_remote_url_action, button.open_remote_url_action",i),r(document).on("click","a.open_url_action",u),r(document).on("click","a.show_more_action",s),r(document).on("click","a.open_url_in_new_tab",d),r(document).on("click",".open_document_from_advertisement_action, .open_document_from_phone_action",o),r(document).on("submit",'form[method="get"]:not([data-remote="true"])',m),r(document).on("click",".yaSend",f),r(document).on("click",".yaSendOpenDomclick",v),r(document).on("click",".dropdown-menu form",t),r(document).on("click",".sidenav-overlay, .sidenav__close, .sidenav a",l),r(document).on("ajax:error",function(){return requirejs(["bootstrap_notify"],function(){return r(".notifications").notify({message:"\u0421\u0435\u0440\u0432\u0435\u0440 \u043d\u0435 \u0441\u043c\u043e\u0433 \u043e\u0442\u0432\u0435\u0442\u0438\u0442\u044c",type:"danger"}).show()})}),requirejs(["nprogress"],function(e){return r(document).on("page:fetch",function(){return e.start()}),r(document).on("page:change",function(){return e.done()}),r(document).on("page:restore",function(){return e.remove()}),r(document).on("ajaxStart",function(){return e.start()}),r(document).on("ajaxStop",function(){return e.done()}),r(document).on("ready",function(){return e.remove()}),r(document).on("ajax:error",function(){return e.remove()})}),w=function(){return r('[data-toggle="popover"]').popover()},r(document).ready(w),r(document).on("page:load",w))})}).call(this);